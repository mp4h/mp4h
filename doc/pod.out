
;;;
;;;    Sectioning
;;;
<define-tag section>=head1 <upcase %attributes>
</define-tag>
<define-tag subsection>=head2 %attributes
</define-tag>

;;;
;;;    Common names
;;;
<define-tag program>B_LT_%attributes_GT_</define-tag>
<define-tag mp4h><program mp4h></define-tag>
<define-tag WML><program WML></define-tag>
<define-tag m4><program m4></define-tag>
<define-tag Meta-HTML><program Meta-HTML></define-tag>

<define-tag var>I_LT_%attributes_GT_</define-tag>
<define-tag value>C_LT_%attributes_GT_</define-tag>
<define-tag commande>C_LT_%attributes_GT_</define-tag>
<define-tag left-angle>_LT_</define-tag>
<define-tag right-angle>_GT_</define-tag>
<define-tag true>C_LT_true_GT_</define-tag>

;;;
;;;    Alias for writing URLs
;;;
<define-tag URL whitespace=delete>
<preserve name>
<preserve src>
<set-var %attributes>
<get-var name> C_LT_E_LT_lt_GT_URL:<get-var src>E_LT_gt_GT__GT_
<restore src>
<restore name>
</define-tag>

;;;
;;;    Header of the POD document
;;;
<define-tag header>
=pod

=head1 NAME

<get-var title>

=head1 VERSION

<get-var version>

</define-tag>

;;;
;;;    Footer of the POD document
;;;
<define-tag footer>
=cut
</define-tag>

;;;
;;;    Description of MP4H tags
;;;
<define-tag tag:description endtag=required>;;;
<preserve complex>;;;
<preserve verbatim>;;;
<set-var complex=*>;;;
<set-var verbatim=*>;;;
<set-var %attributes>;;;
<set-var list-attributes[]="%body">;;;

=over 2

=item * %0 ;;;
<set-var _i="%0"><subst-in-var _i . " ">;;;
<match "                              " <get-var _i> action=delete>;;;
<if <get-var complex> - "End Tag"> <if <get-var verbatim> - "Verbatim Attributes">

<foreach attr list-attributes>;;;
<if <get-var attr> <group C_LT_<get-var attr>_GT_ " ">>;;;
</foreach>

=back
<restore verbatim>;;;
<restore complex>;;;
</define-tag>

<define-tag attributes:description endtag=required>

=over 4

%body

=back

</define-tag>

<define-tag attributes:item>
=item <attribute %0>

</define-tag>

;;;
;;;    Paragraphs
;;;
<define-tag para endtag=required>

%body

</define-tag>

;;;
;;;    Example of MP4H code
;;;
<define-tag example endtag=required attributes=verbatim>
<set-var-verbatim verb-body=%ubody>;;;
<subst-in-var verb-body "<" "_LT_">;;;
<subst-in-var verb-body ">" "_GT_">;;;
<subst-in-var verb-body "^[ \t\n]+" "" singleline=true>;;;
<subst-in-var verb-body "[ \t\n]+$" "" singleline=true>;;;
<subst-in-var verb-body "^(.)" "   \\1">;;;
<set-var body=%body>;;;
<subst-in-var body "^[ \t\n]+" "" singleline=true>;;;
<subst-in-var body "[ \t\n]+$" "" singleline=true>;;;
<subst-in-var body "^(.)" "   \\1">;;;
Example:

<get-var-once verb-body>
    
Output:

<get-var-once body>

</define-tag>

;;;
;;;    Verbatim code
;;;
<define-tag code endtag=required attributes=verbatim>
%ubody
</define-tag>

;;;
;;;    Attributes
;;;
<define-tag attribute>C_LT_%attributes_GT_</define-tag>

;;;
;;;    HTML Comments
;;;
<define-tag html:comment endtag=required>
_LT_!--%body--_GT_
</define-tag>

<define-tag pre endtag=required>
%body
</define-tag>

