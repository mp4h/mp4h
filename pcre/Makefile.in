
# Makefile.in for PCRE (Perl-Compatible Regular Expression) library.

# This file has been modified for inclusion into mp4h
#   Denis Barbier

@SET_MAKE@
SHELL = /bin/sh

top_srcdir      = @top_srcdir@
srcdir          = @srcdir@
VPATH           = @srcdir@

CC     = @CC@
CFLAGS = @CFLAGS@
DEFS   = -I. -I$(srcdir) -I.. -DSUPPORT_UTF8
RANLIB = @RANLIB@

#---------------------------------------------------------------------------#
# For almost all systems, the command to create a library is "ar cq", but   #
# there is at least one where it is different, to make this configurable.   #
# However, I haven't got round to learning how to make "configure" find     #
# this out for itself. It is necessary to use a command such as             #
# "make AR='ar -rc'" if you need to vary this.                              #
#---------------------------------------------------------------------------#

AR = ar
RM = rm -f

##############################################################################

OBJ = maketables.o study.o pcre.o

.SUFFIXES:
.SUFFIXES: .o .c
.c.o:
	$(CC) -c $(CFLAGS) $(DEFS) $<

all: libpcre.a

libpcre.a: $(OBJ)
	-$(RM) libpcre.a
	$(AR) cru libpcre.a $(OBJ)
	$(RANLIB) libpcre.a

# An auxiliary program makes the default character table source

pcre.o: chartables.c

chartables.c: dftables
	./dftables >chartables.c

dftables: dftables.c maketables.c pcre.h internal.h
	$(CC) -o dftables $(CFLAGS) $(DEFS) dftables.c

# We deliberately omit dftables and chartables.c from 'make clean'; once made
# chartables.c shouldn't change, and if people have edited the tables by hand,
# you don't want to throw them away.

clean:
	-$(RM) *.o *.a

# But "make distclean" should get back to a virgin distribution

distclean: clean
	-$(RM) chartables.c dftables Makefile

install test:
	@:

##EOF##
